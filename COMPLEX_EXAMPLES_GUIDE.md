# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ SQL –∑–∞–ø—Ä–æ—Å–æ–≤

## –û–±–∑–æ—Ä

–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Explain –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã **9 –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ SQL –∑–∞–ø—Ä–æ—Å–æ–≤** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã

### 1. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ JOIN —Å –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞–º–∏** (1066 —Å–∏–º–≤–æ–ª–æ–≤)
- CTE —Å –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ LEFT JOIN
- –û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (ROW_NUMBER)
- –°–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è WHERE

### 2. **–ê–≥—Ä–µ–≥–∞—Ü–∏—è —Å –æ–∫–æ–Ω–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏** (939 —Å–∏–º–≤–æ–ª–æ–≤)
- LAG/LEAD —Ñ—É–Ω–∫—Ü–∏–∏
- PERCENT_RANK –∏ NTILE
- –°–∫–æ–ª—å–∑—è—â–∏–µ –æ–∫–Ω–∞ (ROWS BETWEEN)
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 3. **–†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π CTE —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π** (1328 —Å–∏–º–≤–æ–ª–æ–≤)
- –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ CTE
- –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- –ú–∞—Å—Å–∏–≤—ã –¥–ª—è –ø—É—Ç–µ–π
- –°–ª–æ–∂–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è

### 4. **–°–ª–æ–∂–Ω—ã–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã —Å EXISTS** (1366 —Å–∏–º–≤–æ–ª–æ–≤)
- EXISTS –∏ NOT EXISTS
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã
- CASE —Å –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞–º–∏
- –°–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

### 5. **–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π** (1596 —Å–∏–º–≤–æ–ª–æ–≤)
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –°–ª–æ–∂–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞
- –ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ PARTITION BY

### 6. **–°–ª–æ–∂–Ω—ã–µ JOIN —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏** (1805 —Å–∏–º–≤–æ–ª–æ–≤)
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ LEFT JOIN
- –°–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è WHERE
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Å CASE
- –ü–æ–¥–∑–∞–ø—Ä–æ—Å—ã –≤ SELECT

### 7. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π** (1481 —Å–∏–º–≤–æ–ª–æ–≤)
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã PostgreSQL
- –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ê–Ω–∞–ª–∏–∑ –∏–Ω–¥–µ–∫—Å–æ–≤

### 8. **–°–ª–æ–∂–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** (2271 —Å–∏–º–≤–æ–ª–æ–≤)
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –∏ –¥–∞—Ç—ã
- CTE —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ê–Ω–∞–ª–∏–∑ –∫–æ–≥–æ—Ä—Ç

### 9. **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** (3826 —Å–∏–º–≤–æ–ª–æ–≤)
- –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –°–ª–æ–∂–Ω–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è
- RFM –∞–Ω–∞–ª–∏–∑
- –ü—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"üîç Explain –∞–Ω–∞–ª–∏–∑"**
2. –í —Ä–∞–∑–¥–µ–ª–µ **"üöÄ –°–ª–æ–∂–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"** –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
3. –ù–∞–∂–º–∏—Ç–µ **"üîç –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å"**
4. –ò–∑—É—á–∏—Ç–µ –ø–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –º–µ—Ç—Ä–∏–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –í mock —Ä–µ–∂–∏–º–µ:
- –î–æ—Å—Ç—É–ø–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Å–µ—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö
- –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üîß –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **Seq Scan** vs **Index Scan**
- **Hash Join** vs **Nested Loop**
- **Sort** –æ–ø–µ—Ä–∞—Ü–∏–∏
- **Aggregate** —Ñ—É–Ω–∫—Ü–∏–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è JOIN
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è WHERE
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è ORDER BY
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è GROUP BY

### –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –°—Ç–æ–∏–º–æ—Å—Ç—å —É–∑–ª–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –¢–∏–ø—ã —É–∑–ª–æ–≤:
- **Seq Scan** - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Index Scan** - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –∏–Ω–¥–µ–∫—Å—É
- **Hash Join** - —Ö–µ—à-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- **Nested Loop** - –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Ü–∏–∫–ª
- **Sort** - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- **Aggregate** - –∞–≥—Ä–µ–≥–∞—Ü–∏—è
- **Window** - –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ú–µ—Ç—Ä–∏–∫–∏:
- **–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å** - —Å—É–º–º–∞—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–ª–∞–Ω–∞
- **–°—Ç—Ä–æ–∫–∏** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö —Å—Ç—Ä–æ–∫
- **–í—Ä–µ–º—è** - –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **–ü–∞–º—è—Ç—å** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–º–µ—Ä—ã –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ
- –°–æ–∑–¥–∞–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã PostgreSQL

### –†–µ—Å—É—Ä—Å—ã:
- –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –î–∞–Ω–Ω—ã–µ:
- –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é—Ç –Ω–∞–ª–∏—á–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
- –ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥ —Å–≤–æ—é —Å—Ö–µ–º—É –¥–∞–Ω–Ω—ã—Ö
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö –¥–∞–Ω–Ω—ã—Ö

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
- –ò–∑—É—á–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö SQL –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø–ª–∞–Ω–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –ë–î:
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ê–Ω–∞–ª–∏–∑ –∏–Ω–¥–µ–∫—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

### –î–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤:
- –°–ª–æ–∂–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã
- –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–ª–æ–∂–Ω—ã–º –ø—Ä–∏–º–µ—Ä–∞–º](docs/COMPLEX_SQL_EXAMPLES.md)
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)
- [Performance Tips](https://www.postgresql.org/docs/current/performance-tips.html)
- [EXPLAIN Documentation](https://www.postgresql.org/docs/current/using-explain.html)

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

–í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –∏–∑ 9 —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –∏ –Ω–∞—á–Ω–∏—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Explain –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!
